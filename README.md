# emscripten-glut-resizable
*Emscripten GLUT/OpenGLES test with fix for browser resizing*

This is a modified version of Emscripten's test, [hello_world_gles.c](https://github.com/kripken/emscripten/blob/incoming/tests/hello_world_gles.c), fixed to handle browser window resizing.

An Emscripten issue has been [logged](https://github.com/kripken/emscripten/issues/7133).

## Steps
Steps to reproduce issue:

1. Build and [run original version](https://erik-larsen.github.io/emscripten-glut-resizable/hello_world_gles.html):
```
emcc hello_world_gles.c -s WASM=0 -o hello_world_gles.js
emrun hello_world_gles.html
```
2. Resize the browser window.  Note the chunky resolution (300x300), unchanged regardless of browser window resizing.

3. Build and [run fixed version](https://erik-larsen.github.io/emscripten-glut-resizable/hello_world_gles_resizable.html):
```
emcc hello_world_gles_resizable.c -s WASM=0 -o hello_world_gles_resizable.js
emrun hello_world_gles_resizable.html
```
4. Resize the browser window.  Note the full window resolution is now used, and the window aspect ratio is properly handled.

## Issue
The issue is that the glutReshapeFunc() callback is not being called when the browser window is resized.

## Fix
The fix (for now) is to detect when the HTML canvas has changed size in the glutDisplayFunc() callback, and explicitly call glutReshapeWindow() with the updated canvas size. This then invokes glutReshapeFunc() callback with the updated canvas size.  A better fix would be to have Emscripten's GLUT implementation respond to browser window resize events under the hood.

Also note the default html generated by Emscripten (-o hello_world_gles.html) does not show this issue because the canvas is not resizable.  To demonstrate the issue, HTML which stretches the canvas to fill the entire browser window is provided (hello_world_gles_resizable.html).  
